#define not(o, k) (300 + (o) + 100 * (k))
#define sees(o) (200 + (o))
#define holds(o) (100 + (o))
#define FORCE 0

typedef struct {
    motion mot;
    int cond;
    location dest;
} instruction;

constexpr size_t travel_size = 738;
const instruction travels[travel_size] = {
    // [road] = &travels[0],
    [0] = {.mot = W, .cond = 0, .dest = hill},
    [1] = {U, 0, hill},
    [2] = {ROAD, 0, hill},
    [3] = {E, 0, house},
    [4] = {IN, 0, house},
    [5] = {HOUSE, 0, house},
    [6] = {ENTER, 0, house},
    [7] = {S, 0, valley},
    [8] = {D, 0, valley},
    [9] = {GULLY, 0, valley},
    [10] = {STREAM, 0, valley},
    [11] = {DOWNSTREAM, 0, valley},
    [12] = {N, 0, forest},
    [13] = {WOODS, 0, forest},
    [14] = {DEPRESSION, 0, outside},

    // [hill] = &travels[15],
    [15] = {ROAD, 0, road},
    [16] = {HOUSE, 0, road},
    [17] = {FORWARD, 0, road},
    [18] = {E, 0, road},
    [19] = {D, 0, road},
    [20] = {WOODS, 0, forest},
    [21] = {N, 0, forest},
    [22] = {S, 0, forest},

    // [house]=&travels[23],
    [23] = {ENTER, 0, road},
    [24] = {OUT, 0, road},
    [25] = {OUTDOORS, 0, road},
    [26] = {W, 0, road},
    [27] = {XYZZY, 0, debris},
    [28] = {PLUGH, 0, y2},
    [29] = {DOWNSTREAM, 0, sewer},
    [30] = {STREAM, 0, sewer},

    // [valley] = &travels[31],
    [31] = {UPSTREAM, 0, road},
    [32] = {HOUSE, 0, road},
    [33] = {N, 0, road},
    [34] = {WOODS, 0, forest},
    [35] = {E, 0, forest},
    [36] = {W, 0, forest},
    [37] = {U, 0, forest},
    [38] = {DOWNSTREAM, 0, slit},
    [39] = {S, 0, slit},
    [40] = {D, 0, slit},
    [41] = {DEPRESSION, 0, outside},

    // [forest] = &travels[42],
    [42] = {VALLEY, 0, valley},
    [43] = {E, 0, valley},
    [44] = {D, 0, valley},
    [45] = {WOODS, 50, forest},
    [46] = {FORWARD, 50, forest},
    [47] = {N, 50, forest},
    [48] = {WOODS, 0, woods},
    [49] = {W, 0, forest},
    [50] = {S, 0, forest},

    // [woods]=&travels[51],
    [51] = {ROAD, 0, road},
    [52] = {N, 0, road},
    [53] = {VALLEY, 0, valley},
    [54] = {E, 0, valley},
    [55] = {W, 0, valley},
    [56] = {D, 0, valley},
    [57] = {WOODS, 0, forest},
    [58] = {S, 0, forest},

    // [slit]=&travels[59],
    [59] = {HOUSE, 0, road},
    [60] = {UPSTREAM, 0, valley},
    [61] = {N, 0, valley},
    [62] = {WOODS, 0, forest},
    [63] = {E, 0, forest},
    [64] = {W, 0, forest},
    [65] = {DOWNSTREAM, 0, outside},
    [66] = {ROCK, 0, outside},
    [67] = {BED, 0, outside},
    [68] = {S, 0, outside},
    [69] = {SLIT, 0, sayit},
    [70] = {STREAM, 0, sayit},
    [71] = {D, 0, sayit},

    // [outside]=&travels[72],
    [72] = {WOODS, 0, forest},
    [73] = {E, 0, forest},
    [74] = {W, 0, forest},
    [75] = {S, 0, forest},
    [76] = {HOUSE, 0, road},
    [77] = {UPSTREAM, 0, slit},
    [78] = {GULLY, 0, slit},
    [79] = {N, 0, slit},
    [80] = {ENTER, not(GRATE, 0), inside},
    [81] = {IN, not(GRATE, 0), inside},
    [82] = {D, not(GRATE, 0), inside},
    [83] = {ENTER, 0, sayit},

    // [inside]=&travels[84],
    [84] = {OUT, not(GRATE, 0), outside},
    [85] = {U, not(GRATE, 0), outside},
    [86] = {OUT, 0, sayit},
    [87] = {CRAWL, 0, cobbles},
    [88] = {COBBLES, 0, cobbles},
    [89] = {IN, 0, cobbles},
    [90] = {W, 0, cobbles},
    [91] = {PIT, 0, spit},
    [92] = {DEBRIS, 0, debris},

    // [cobbles]=&travels[93],
    [93] = {OUT, 0, inside},
    [94] = {SURFACE, 0, inside},
    [95] = {NOWHERE, 0, inside},
    [96] = {E, 0, inside},
    [97] = {IN, 0, debris},
    [98] = {DARK, 0, debris},
    [99] = {W, 0, debris},
    [100] = {DEBRIS, 0, debris},
    [101] = {PIT, 0, spit},

    // [debris]=&travels[102],
    [102] = {DEPRESSION, not(GRATE, 0), outside},
    [103] = {ENTRANCE, 0, inside},
    [104] = {CRAWL, 0, cobbles},
    [105] = {COBBLES, 0, cobbles},
    [106] = {PASSAGE, 0, cobbles},
    [107] = {LOW, 0, cobbles},
    [108] = {E, 0, cobbles},
    [109] = {CANYON, 0, awk},
    [110] = {IN, 0, awk},
    [111] = {U, 0, awk},
    [112] = {W, 0, awk},
    [113] = {XYZZY, 0, house},
    [114] = {PIT, 0, spit},

    // [awk]=&travels[115],
    [115] = {DEPRESSION, not(GRATE, 0), outside},
    [116] = {ENTRANCE, 0, inside},
    [117] = {D, 0, debris},
    [118] = {E, 0, debris},
    [119] = {DEBRIS, 0, debris},
    [120] = {IN, 0, bird},
    [121] = {U, 0, bird},
    [122] = {W, 0, bird},
    [123] = {PIT, 0, spit},

    //[bird]=&travels[124],
    [124] = {DEPRESSION, not(GRATE, 0), outside},
    [125] = {ENTRANCE, 0, inside},
    [126] = {DEBRIS, 0, debris},
    [127] = {CANYON, 0, awk},
    [128] = {E, 0, awk},
    [129] = {PASSAGE, 0, spit},
    [130] = {PIT, 0, spit},
    [131] = {W, 0, spit},

    //[spit]=&travels[132]
    [132] = {DEPRESSION, not(GRATE, 0), outside},
    [133] = {ENTRANCE, 0, inside},
    [134] = {DEBRIS, 0, debris},
    [135] = {PASSAGE, 0, bird},
    [136] = {E, 0, bird},
    [137] = {D, holds(GOLD), neck},
    [138] = {PIT, holds(GOLD), neck},
    [139] = {STEPS, holds(GOLD), neck},
    [140] = {D, 0, emist},
    [141] = {CRACK, 0, crack},
    [142] = {W, 0, crack},

    // [ emist]=&travels[143];
    [143] = {L, 0, nugget},
    [144] = {S, 0, nugget},
    [145] = {FORWARD, 0, efiss},
    [146] = {HALL, 0, efiss},
    [147] = {W, 0, efiss},
    [148] = {STAIRS, 0, hmk},
    [149] = {D, 0, hmk},
    [150] = {N, 0, hmk},
    [151] = {U, holds(GOLD), cant},
    [152] = {PIT, holds(GOLD), cant},
    [153] = {STEPS, holds(GOLD), cant},
    [154] = {DOME, holds(GOLD), cant},
    [155] = {PASSAGE, holds(GOLD), cant},
    [156] = {E, holds(GOLD), cant},
    [157] = {U, 0, spit},
    [158] = {Y2, 0, jumble},

    // [nugget] = &travels[159],
    [159] = {HALL, 0, emist},
    [160] = {OUT, 0, emist},
    [161] = {N, 0, emist},

    // [efiss] = &travels[162];
    [162] = {HALL, 0, emist},
    [163] = {E, 0, emist},
    [164] = {JUMP, not(CRYSTAL, 0), sayit},
    [165] = {FORWARD, not(CRYSTAL, 1), lose},
    [166] = {OVER, not(CRYSTAL, 1), sayit},
    [167] = {ACROSS, not(CRYSTAL, 1), sayit},
    [168] = {W, not(CRYSTAL, 1), sayit},
    [169] = {CROSS, not(CRYSTAL, 1), sayit},
    [170] = {OVER, 0, wfiss},

    // [wfiss]=&travels[171],
    [171] = {JUMP, not(CRYSTAL, 0), sayit},
    [172] = {FORWARD, not(CRYSTAL, 1), lose},
    [173] = {OVER, not(CRYSTAL, 1), sayit},
    [174] = {ACROSS, not(CRYSTAL, 1), sayit},
    [175] = {E, not(CRYSTAL, 1), sayit},
    [176] = {CROSS, not(CRYSTAL, 1), sayit},
    [177] = {OVER, 0, efiss},
    [178] = {N, 0, thru},
    [179] = {W, 0, wmist},

    // [wmist]=&travels[180],
    [180] = {S, 0, like1},
    [181] = {U, 0, like1},
    [182] = {PASSAGE, 0, like1},
    [183] = {CLIMB, 0, like1},
    [184] = {E, 0, wfiss},
    [185] = {N, 0, duck},
    [186] = {W, 0, elong},
    [187] = {CRAWL, 0, elong},

    // [like1]=&travels[188],
    [188] = {U, 0, wmist},
    [189] = {N, 0, like1},
    [190] = {E, 0, like2},
    [191] = {S, 0, like4},
    [192] = {W, 0, like11},

    // [like2]=&travels[193];
    [193] = {W, 0, like1},
    [194] = {S, 0, like3},
    [195] = {E, 0, like4},

    // [like3]=&travels[196],
    [196] = {E, 0, like2},
    [197] = {D, 0, dead5},
    [198] = {S, 0, like6},
    [199] = {N, 0, dead9},

    // [like4]=&travels[200],
    [200] = {W, 0, like1},
    [201] = {N, 0, like2},
    [202] = {E, 0, dead3},
    [203] = {S, 0, dead4},
    [204] = {U, 0, like14},
    [205] = {D, 0, like14},

    // [like5]=&travels[206],
    [206] = {E, 0, like6},
    [207] = {W, 0, like7},

    // [like6]=&travels[208],
    [208] = {E, 0, like3},
    [209] = {W, 0, like5},
    [210] = {D, 0, like7},
    [211] = {S, 0, like8},

    // [like7]=&travels[212],
    [212] = {W, 0, like5},
    [213] = {U, 0, like6},
    [214] = {E, 0, like8},
    [215] = {S, 0, like9},

    // [like8]=&travels[216],
    [216] = {W, 0, like6},
    [217] = {E, 0, like7},
    [218] = {S, 0, like8},
    [219] = {U, 0, like9},
    [220] = {N, 0, like10},
    [221] = {D, 0, dead11},

    // [like9]=&travels[222],
    [222] = {W, 0, like7},
    [223] = {N, 0, like8},
    [224] = {S, 0, dead6},

    // [like10]=&travels[225],
    [225] = {W, 0, like8},
    [226] = {N, 0, like10},
    [227] = {D, 0, dead7},
    [228] = {E, 0, brink},

    // [like11]=&travels[229],
    [229] = {N, 0, like1},
    [230] = {W, 0, like11},
    [231] = {S, 0, like11},
    [232] = {E, 0, dead1},

    // [like12]=&travels[233],
    [233] = {S, 0, brink},
    [234] = {E, 0, like13},
    [235] = {W, 0, dead10},

    // [like13]=&travels[236],
    [236] = {N, 0, brink},
    [237] = {W, 0, like12},
    [238] = {NW, 0, dead2},

    // [like14]=&travels[239],
    [239] = {U, 0, like4},
    [240] = {D, 0, like4},

    // [brink]=&travels[241];
    [241] = {D, 0, bird},
    [242] = {CLIMB, 0, bird},
    [243] = {W, 0, like10},
    [244] = {S, 0, dead8},
    [245] = {N, 0, like12},
    [246] = {E, 0, like13},

    // [elong] = &travels[247],
    [247] = {E, 0, wmist},
    [248] = {U, 0, wmist},
    [249] = {CRAWL, 0, wmist},
    [250] = {W, 0, wlong},
    [251] = {N, 0, cross},
    [252] = {D, 0, cross},
    [253] = {HOLE, 0, cross},

    // [wlong]=&travels[254],
    [254] = {E, 0, elong},
    [255] = {N, 0, cross},
    [256] = {S, 100, diff0},

// [diff0]=&travels[257],
    [257] = {N, 0, diff9},
    [258] = {S, 0, diff1},
    [259] = {E, 0, diff7},
    [260] = {W, 0, diff8},
    [261] = {NE, 0, diff3},
    [262] = {SE, 0, diff4},
    [263] = {NW, 0, diff6},
    [264] = {SW, 0, diff2},
    [265] = {U, 0, diff5},
    [266] = {D, 0, wlong},


// [diff1]=&travels[267],
    [267] = {N, 0, diff8},
    [268] = {S, 0, diff9},
    [269] = {E, 0, diff10},
    [270] = {W, 0, diff0},
    [271] = {NE, 0, diff5},
    [272] = {SE, 0, diff2},
    [273] = {NW, 0, diff3},
    [274] = {SW, 0, diff4},
    [275] = {U, 0, diff6},
    [276] = {D, 0, diff7},

    // [diff2]=&travels[277],
    [277] = {N, 0, diff3},
    [278] = {S, 0, diff4},
    [279] = {E, 0, diff8},
    [280] = {W, 0, diff5},
    [281] = {NE, 0, diff7},
    [282] = {SE, 0, diff10},
    [283] = {NW, 0, diff0},
    [284] = {SW, 0, diff6},
    [285] = {U, 0, diff1},
    [286] = {D, 0, diff9},

    // [diff3]=&travels[287],
    [287] = {N, 0, diff7},
    [288] = {S, 0, diff10},
    [289] = {E, 0, diff6},
    [290] = {W, 0, diff2},
    [291] = {NE, 0, diff4},
    [292] = {SE, 0, diff9},
    [293] = {NW, 0, diff8},
    [294] = {SW, 0, diff5},
    [295] = {U, 0, diff0},
    [296] = {D, 0, diff1},

    // [diff4]=&travels[297],
    [297] = {N, 0, diff1},
    [298] = {S, 0, diff7},
    [299] = {E, 0, diff5},
    [300] = {W, 0, diff9},
    [301] = {NE, 0, diff0},
    [302] = {SE, 0, diff3},
    [303] = {NW, 0, diff2},
    [304] = {SW, 0, diff10},
    [305] = {U, 0, diff8},
    [306] = {D, 0, diff6},

    // [diff5]=&travels[307],
    [307] = {N, 0, diff0},
    [308] = {S, 0, diff3},
    [309] = {E, 0, diff4},
    [310] = {W, 0, diff6},
    [311] = {NE, 0, diff8},
    [312] = {SE, 0, diff1},
    [313] = {NW, 0, diff9},
    [314] = {SW, 0, diff7},
    [315] = {U, 0, diff10},
    [316] = {D, 0, diff2},

    // [diff6]=&travels[317],
    [317] = {N, 0, diff10},
    [318] = {S, 0, diff5},
    [319] = {E, 0, diff0},
    [320] = {W, 0, diff1},
    [321] = {NE, 0, diff9},
    [322] = {SE, 0, diff8},
    [323] = {NW, 0, diff7},
    [324] = {SW, 0, diff3},
    [325] = {U, 0, diff2},
    [326] = {D, 0, diff4},

    // [diff7]=&travels[327],
    [327] = {N, 0, diff6},
    [328] = {S, 0, diff2},
    [329] = {E, 0, diff9},
    [330] = {W, 0, diff10},
    [331] = {NE, 0, diff1},
    [332] = {SE, 0, diff0},
    [333] = {NW, 0, diff5},
    [334] = {SW, 0, diff8},
    [335] = {U, 0, diff4},
    [336] = {D, 0, diff3},

    // [diff8]=&travels[337],
    [337] = {N, 0, diff5},
    [338] = {S, 0, diff6},
    [339] = {E, 0, diff1},
    [340] = {W, 0, diff4},
    [341] = {NE, 0, diff2},
    [342] = {SE, 0, diff7},
    [343] = {NW, 0, diff10},
    [344] = {SW, 0, diff9},
    [345] = {U, 0, diff3},
    [346] = {D, 0, diff0},

    // [diff9]=&travels[347],
    [347] = {N, 0, diff4},
    [348] = {S, 0, diff8},
    [349] = {E, 0, diff2},
    [350] = {W, 0, diff3},
    [351] = {NE, 0, diff10},
    [352] = {SE, 0, diff6},
    [353] = {NW, 0, diff1},
    [354] = {SW, 0, diff0},
    [355] = {U, 0, diff7},
    [356] = {D, 0, diff5},

    // [diff10]=&travels[357],
    [357] = {N, 0, diff2},
    [358] = {S, 0, pony},
    [359] = {E, 0, diff3},
    [360] = {W, 0, diff7},
    [361] = {NE, 0, diff6},
    [362] = {SE, 0, diff5},
    [363] = {NW, 0, diff4},
    [364] = {SW, 0, diff1},
    [365] = {U, 0, diff9},
    [366] = {D, 0, diff8},

    // [pony]=&travels[367],
    [367] = {N, 0, diff10},
    [368] = {OUT, 0, diff10},

    // [cross]=&travels[369],
    [369] = {W, 0, elong},
    [370] = {N, 0, dead0},
    [371] = {E, 0, west},
    [372] = {S, 0, wlong},

    // [hmk]=&travels[373],
    [373] = {STAIRS, 0, emist},
    [374] = {U, 0, emist},
    [375] = {E, 0, emist},
    [376] = {N, not(SNAKE, 0), ns},
    [377] = {L, not(SNAKE, 0), ns},
    [378] = {S, not(SNAKE, 0), south},
    [379] = {R, not(SNAKE, 0), south},
    [380] = {W, not(SNAKE, 0), west},
    [381] = {FORWARD, not(SNAKE, 0), west},
    [382] = {N, 0, snaked},
    [383] = {SW, 35, secret},
    [384] = {SW, sees(SNAKE), snaked},
    [385] = {SECRET, 0, secret},

    // [west]=&travels[386],
    [386] = {HALL, 0, hmk},
    [387] = {OUT, 0, hmk},
    [388] = {E, 0, hmk},
    [389] = {W, 0, cross},
    [390] = {U, 0, cross},

    // [south]=&travels[391];
    [391] = {HALL, 0, hmk},
    [392] = {OUT, 0, hmk},
    [393] = {N, 0, hmk},

    // [ns]=&travels[394],
    [394] = {HALL, 0, hmk},
    [395] = {OUT, 0, hmk},
    [396] = {S, 0, hmk},
    [397] = {N, 0, y2},
    [398] = {Y2, 0, y2},
    [399] = {D, 0, dirty},
    [400] = {HOLE, 0, dirty},

    // [y2]=&travels[401]
    [401] = {PLUGH, 0, house},
    [402] = {S, 0, ns},
    [403] = {E, 0, jumble},
    [404] = {WALL, 0, jumble},
    [405] = {BROKEN, 0, jumble},
    [406] = {W, 0, windoe},
    [407] = {PLOVER, holds(EMERALD), pdrop},
    [408] = {PLOVER, 0, proom},

    // [jumble]=&travels[409],
    [409] = {D, 0, y2},
    [410] = {Y2, 0, y2},
    [411] = {U, 0, emist},

    // [windoe] = &travels[412],
    [412] = {E, 0, y2},
    [413] = {Y2, 0, y2},
    [414] = {JUMP, 0, neck},

    // [dirty]=&travels[415],
    [415] = {E, 0, clean},
    [416] = {CRAWL, 0, clean},
    [417] = {U, 0, ns},
    [418] = {HOLE, 0, ns},
    [419] = {W, 0, dusty},
    [420] = {BEDQUILT, 0, bedquilt},

    //[ clean]=&travels[421],
    [421] = {W, 0, dirty},
    [422] = {CRAWL, 0, dirty},
    [423] = {D, 0, wet},
    [424] = {PIT, 0, wet},
    [425] = {CLIMB, 0, wet},

    // [wet]=&travels[426],
    [426] = {CLIMB, 0, clean},
    [427] = {U, 0, clean},
    [428] = {OUT, 0, clean},
    [429] = {SLIT, 0, sayit},
    [430] = {STREAM, 0, sayit},
    [431] = {D, 0, sayit},
    [432] = {UPSTREAM, 0, sayit},
    [433] = {DOWNSTREAM, 0, sayit},

    // [dusty]=&travels[434],
    [434] = {E, 0, dirty},
    [435] = {PASSAGE, 0, dirty},
    [436] = {D, 0, complex},
    [437] = {HOLE, 0, complex},
    [438] = {FLOOR, 0, complex},
    [439] = {BEDQUILT, 0, bedquilt},

    // [complex]=&travels[440];
    [440] = {U, 0, dusty},
    [441] = {CLIMB, 0, dusty},
    [442] = {ROOM, 0, dusty},
    [443] = {W, 0, bedquilt},
    [444] = {BEDQUILT, 0, bedquilt},
    [445] = {N, 0, shell},
    [446] = {SHELL, 0, shell},
    [447] = {E, 0, ante},

    // [shell]=&travels[448];
    [448] = {U, 0, arch},
    [449] = {HALL, 0, arch},
    [450] = {D, 0, ragged},
    [451] = {S, holds(CLAM), sayit},
    [452] = {S, holds(OYSTER), sayit},
    [453] = {S, 0, complex},

    // [arch]=&travels[454],
    [454] = {D, 0, shell},
    [455] = {SHELL, 0, shell},
    [456] = {OUT, 0, shell},

    // [ragged]=&travels[457],
    [457] = {U, 0, shell},
    [458] = {SHELL, 0, shell},
    [459] = {D, 0, sac},

    // [sac]=&travels[460],
    [460] = {U, 0, ragged},
    [461] = {OUT, 0, ragged},
    [462] = {SHELL, 0, shell},

    // [ante]=&travels[463],
    [463] = {U, 0, complex},
    [464] = {W, 0, bedquilt},
    [465] = {E, 0, witt},

//    [witt]=&travels[466],
    [466] = {E, 95, sayit},
    [467] = {N, 95, sayit},
    [468] = {S, 95, sayit},
    [469] = {NE, 95, sayit},
    [470] = {SE, 95, sayit},
    [471] = {SW, 95, sayit},
    [472] = {NW, 95, sayit},
    [473] = {U, 95, sayit},
    [474] = {D, 95, sayit},
    [475] = {E, 0, ante},
    [476] = {W, 0, sayit},

    // [bedquilt]=&travels[477],
    [477] = {E, 0, complex},
    [478] = {W, 0, cheese},
    [479] = {S, 80, sayit},
    [480] = {SLAB, 0, slab},
    [481] = {U, 80, sayit},
    [482] = {U, 50, abovep},
    [483] = {U, 0, dusty},
    [484] = {N, 60, sayit},
    [485] = {N, 75, low},
    [486] = {N, 0, sjunc},
    [487] = {D, 80, sayit},
    [488] = {D, 0, ante},

    //[cheese]=&travels[489],
    [489] = {NE, 0, bedquilt},
    [490] = {W, 0, e2pit},
    [491] = {S, 80, sayit},
    [492] = {CANYON, 0, tall},
    [493] = {E, 0, soft},
    [494] = {NW, 50, sayit},
    [495] = {ORIENTAL, 0, oriental},

    // [soft]=&travels[496],
    [496] = {W, 0, cheese},
    [497] = {OUT, 0, cheese},

    // [e2pit]=&travels[498],
    [498] = {E, 0, cheese},
    [499] = {W, 0, w2pit},
    [500] = {ACROSS, 0, w2pit},
    [501] = {D, 0, epit},
    [502] = {PIT, 0, epit},

    // [w2pit]=&travels[503],
    [503] = {E, 0, e2pit},
    [504] = {ACROSS, 0, e2pit},
    [505] = {W, 0, slab},
    [506] = {SLAB, 0, slab},
    [507] = {D, 0, wpit},
    [508] = {PIT, 0, wpit},
    [509] = {HOLE, 0, sayit},

    // [epit]=&travels[510],
    [510] = {U, 0, e2pit},
    [511] = {OUT, 0, e2pit},

    // [wpit]=&travels[512],
    [512] = {U, 0, w2pit},
    [513] = {OUT, 0, w2pit},
    [514] = {CLIMB, not(PLANT, 4), check},
    [515] = {CLIMB, 0, climb},

    //[narrow]=&travels[516],
    [516] = {D, 0, wpit},
    [517] = {CLIMB, 0, wpit},
    [518] = {E, 0, wpit},
    [519] = {JUMP, 0, neck},
    [520] = {W, 0, giant},
    [521] = {GIANT, 0, giant},

    //[giant]=&travels[522],
    [522] = {S, 0, narrow},
    [523] = {E, 0, block},
    [524] = {N, 0, immense},

    // [block]=&travels[525],
    [525] = {S, 0, giant},
    [526] = {GIANT, 0, giant},
    [527] = {OUT, 0, giant},

    // [immense]=&travels[528],
    [528] = {S, 0, giant},
    [529] = {GIANT, 0, giant},
    [530] = {PASSAGE, 0, giant},
    [531] = {N, not(DOOR, 0), falls},
    [532] = {ENTER, not(DOOR, 0), falls},
    [533] = {CAVERN, not(DOOR, 0), falls},
    [534] = {N, 0, sayit},

    // [falls]=&travels[535],
    [535] = {S, 0, immense},
    [536] = {OUT, 0, immense},
    [537] = {GIANT, 0, giant},
    [538] = {W, 0, steep},

    // [steep]=&travels[539],
    [539] = {N, 0, falls},
    [540] = {CAVERN, 0, falls},
    [541] = {PASSAGE, 0, falls},
    [542] = {D, 0, low},
    [543] = {CLIMB, 0, low},

    // [abovep]=&travels[544],
    [544] = {N, 0, sjunc},
    [545] = {D, 0, bedquilt},
    [546] = {PASSAGE, 0, bedquilt},
    [547] = {S, 0, tite},

    //[sjunc]=&travels[548],
    [548] = {SE, 0, bedquilt},
    [549] = {S, 0, abovep},
    [550] = {N, 0, window},

    //[tite]=&travels[551],
    [551] = {N, 0, abovep},
    [552] = {D, 40, like6},
    [553] = {JUMP, 40, like6},
    [554] = {CLIMB, 40, like6},
    [555] = {D, 50, like9},
    [556] = {D, 0, like4},

    //[low]=&travels[557],
    [557] = {BEDQUILT, 0, bedquilt},
    [558] = {SW, 0, scorr},
    [559] = {N, 0, crawl},
    [560] = {SE, 0, oriental},
    [561] = {ORIENTAL, 0, oriental},

    //[crawl]=&travels[562],
    [562] = {S, 0, low},
    [563] = {CRAWL, 0, low},
    [564] = {OUT, 0, low},

    //[ window]=&travels[565],
    [565] = {W, 0, sjunc},
    [566] = {JUMP, 0, neck},

    //  [oriental]=&travels[567],
    [567] = {SE, 0, cheese},
    [568] = {W, 0, low},
    [569] = {CRAWL, 0, low},
    [570] = {U, 0, misty},
    [571] = {N, 0, misty},
    [572] = {CAVERN, 0, misty},

    // [misty]=&travels[573],
    [573] = {S, 0, oriental},
    [574] = {ORIENTAL, 0, oriental},
    [575] = {W, 0, alcove},

    //[alcove]=&travels[576],
    [576] = {NW, 0, misty},
    [577] = {CAVERN, 0, misty},
    [578] = {E, 0, ppass},
    [579] = {PASSAGE, 0, ppass},
    [580] = {E, 0, proom},

    // [proom]=&travels[581],
    [581] = {W, 0, ppass},
    [582] = {PASSAGE, 0, ppass},
    [583] = {OUT, 0, ppass},
    [584] = {W, 0, alcove},
    [585] = {PLOVER, holds(EMERALD), pdrop},
    [586] = {PLOVER, 0, y2},
    [587] = {NE, 0, droom},
    [588] = {DARK, 0, droom},

    //[droom]=&travels[589],
    [589] = {S, 0, proom},
    [590] = {PLOVER, 0, proom},
    [591] = {OUT, 0, proom},

    //[slab]=&travels[592],
    [592] = {S, 0, w2pit},
    [593] = {U, 0, abover},
    [594] = {CLIMB, 0, abover},
    [595] = {N, 0, bedquilt},

    //[abover]=&travels[596],
    [596] = {D, 0, slab},
    [597] = {SLAB, 0, slab},
    [598] = {S, not(DRAGON, 0), scan2},
    [599] = {S, 0, scan1},
    [600] = {N, 0, mirror},
    [601] = {RESERVOIR, 0, res},

    //[mirror]=&travels[602],
    [602] = {S, 0, abover},
    [603] = {N, 0, res},
    [604] = {RESERVOIR, 0, res},

    //[res]=&travels[605],
    [605] = {S, 0, mirror},
    [606] = {OUT, 0, mirror},

    // [scan1]=&travels[607],
    [607] = {N, 0, abover},
    [608] = {OUT, 0, abover},
    [609] = {E, 0, sayit},
    [610] = {FORWARD, 0, sayit},

    //[scan2]=&travels[611],
    [611] = {N, 0, abover},
    [612] = {E, 0, secret},

    //[scan3]=&travels[613],
    [613] = {E, 0, secret},
    [614] = {OUT, 0, secret},
    [615] = {N, 0, sayit},
    [616] = {FORWARD, 0, sayit},

    //[secret]=&travels[617],
    [617] = {E, 0, hmk},
    [618] = {W, not(DRAGON, 0), scan2},
    [619] = {W, 0, scan3},
    [620] = {D, 0, wide},

    //[wide]=&travels[621],
    [621] = {S, 0, tight},
    [622] = {N, 0, tall},

    // [tight]=&travels[623],
    [623] = {N, 0, wide},

    // [tall]=&travels[624],
    [624] = {E, 0, wide},
    [625] = {W, 0, boulders},
    [626] = {N, 0, cheese},
    [627] = {CRAWL, 0, cheese},

    // [boulders]=&travels[628],
    [628] = {S, 0, tall},

    // [scorr]=&travels[629],
    [629] = {D, 0, low},
    [630] = {U, 0, swside},

//   [swside]=&travels[631],
    [631] = {SW, 0, scorr},
    [632] = {OVER, sees(TROLL), sayit},
    [633] = {ACROSS, sees(TROLL), sayit},
    [634] = {CROSS, sees(TROLL), sayit},
    [635] = {NE, sees(TROLL), sayit},
    [636] = {OVER, not(BRIDGE, 0), sayit},
    [637] = {OVER, 0, troll},
    [638] = {JUMP, not(BRIDGE, 0), lose},
    [639] = {JUMP, 0, sayit},

    // [dead0]=&travels[640],
    [640] = {S, 0, cross},
    [641] = {OUT, 0, cross},

    // [dead1]=&travels[642];
    [642] = {W, 0, like11},
    [643] = {OUT, 0, like11},

    //[dead2]=&travels[644],
    [644] = {SE, 0, like13},

    //[dead3]=&travels[645],
    [645] = {W, 0, like4},
    [646] = {OUT, 0, like4},

    // [dead4]=&travels[647]
    [647] = {E, 0, like4},
    [648] = {OUT, 0, like4},

    //[dead5]=&travels[649],
    [649] = {U, 0, like3},
    [650] = {OUT, 0, like3},

    //[dead6]=&travels[651],
    [651] = {W, 0, like9},
    [652] = {OUT, 0, like9},

    //[dead7]=&travels[653],
    [653] = {U, 0, like10},
    [654] = {OUT, 0, like10},

    //[dead8]=&travels[655],
    [655] = {E, 0, brink},
    [656] = {OUT, 0, brink},

    //[dead9]=&travels[657],
    [657] = {S, 0, like3},
    [658] = {OUT, 0, like3},

    //[dead10]=&travels[659],
    [659] = {E, 0, like12},
    [660] = {OUT, 0, like12},

    // [dead11]=&travels[661],
    [661] = {U, 0, like8},
    [662] = {OUT, 0, like8},

    //[neside]=&travels[663],
    [663] = {NE, 0, corr},
    [664] = {OVER, sees(TROLL), sayit - 1},
    [665] = {ACROSS, sees(TROLL), sayit - 1},
    [666] = {CROSS, sees(TROLL), sayit - 1},
    [667] = {SW, sees(TROLL), sayit - 1},
    [668] = {OVER, 0, troll},
    [669] = {JUMP, 0, sayit},
    [670] = {FORK, 0, fork},
    [671] = {VIEW, 0, view},
    [672] = {BARREN, 0, fbarr},

    //[corr]=&travels[673],
    [673] = {W, 0, neside},
    [674] = {E, 0, fork},
    [675] = {FORK, 0, fork},
    [676] = {VIEW, 0, view},
    [677] = {BARREN, 0, fbarr},

    // [fork]=&travels[678],
    [678] = {W, 0, corr},
    [679] = {NE, 0, warm},
    [680] = {L, 0, warm},
    [681] = {SE, 0, lime},
    [682] = {R, 0, lime},
    [683] = {D, 0, lime},
    [684] = {VIEW, 0, view},
    [685] = {BARREN, 0, fbarr},

    //[warm]=&travels[686],
    [686] = {S, 0, fork},
    [687] = {FORK, 0, fork},
    [688] = {N, 0, view},
    [689] = {VIEW, 0, view},
    [690] = {E, 0, chamber},
    [691] = {CRAWL, 0, chamber},

    //[view]=&travels[692],
    [692] = {S, 0, warm},
    [693] = {PASSAGE, 0, warm},
    [694] = {OUT, 0, warm},
    [695] = {FORK, 0, fork},
    [696] = {D, 0, sayit},
    [697] = {JUMP, 0, sayit},

    //[chamber]=&travels[698],
    [698] = {W, 0, warm},
    [699] = {OUT, 0, warm},
    [700] = {CRAWL, 0, warm},
    [701] = {FORK, 0, fork},
    [702] = {VIEW, 0, view},

    //[lime]=&travels[703],
    [703] = {N, 0, fork},
    [704] = {U, 0, fork},
    [705] = {FORK, 0, fork},
    [706] = {S, 0, fbarr},
    [707] = {D, 0, fbarr},
    [708] = {BARREN, 0, fbarr},
    [709] = {VIEW, 0, view},

    //[fbarr]=&travels[710],
    [710] = {W, 0, lime},
    [711] = {U, 0, lime},
    [712] = {FORK, 0, fork},
    [713] = {E, 0, barr},
    [714] = {IN, 0, barr},
    [715] = {BARREN, 0, barr},
    [716] = {ENTER, 0, barr},
    [717] = {VIEW, 0, view},

    //[barr]=&travels[718],
    [718] = {W, 0, fbarr},
    [719] = {OUT, 0, fbarr},
    [720] = {FORK, 0, fork},
    [721] = {VIEW, 0, view},

    // [neend]=&travels[722],
    [722] = {SW, 0, swend},

    // [swend]=&travels[723],
    [723] = {NE, 0, neend},
    [724] = {D, 0, sayit},

    //[crack]=&travels[725],
    [725] = {FORCE, 0, spit},

    //[neck]=&travels[726],
    [726] = {FORCE, 0, limbo},

    //[lose]=&travels[727],
    [727] = {FORCE, 0, limbo},

    //[cant]=&travels[728],
    [728] = {FORCE, 0, emist},

    // [climb]=&travels[729],
    [729] = {FORCE, 0, narrow},

    //[check]=&travels[730],
    [730] = {FORCE, not(PLANT, 2), upnout},
    [731] = {FORCE, 0, didit},

    // [snaked]=&travels[732],
    [732] = {FORCE, 0, hmk},

    //[thru]=&travels[733],
    [733] = {FORCE, 0, wmist},

    //[duck]=&travels[734],
    [734] = {FORCE, 0, wfiss},

    //[sewer]=&travels[735],
    [735] = {FORCE, 0, house},

    //[upnout]=&travels[736],
    [736] = {FORCE, 0, wpit},

    //[didit]=&travels[737],
    [737] = {FORCE, 0, w2pit},
};

const instruction *const start[max_loc + 2] = {
    [road] = &travels[0],
    [hill] = &travels[15],
    [house] = &travels[23],
    [valley] = &travels[31],
    [forest] = &travels[42],
    [woods] = &travels[51],
    [ slit ] = &travels[59],
    [outside] = &travels[72],
    [inside] = &travels[84],
    [cobbles] = &travels[93],
    [debris] = &travels[102],
    [awk] = &travels[115],
    [bird] = &travels[124],
    [spit] = &travels[132],
    [ emist] = &travels[143],
    [nugget] = &travels[159],
    [efiss] = &travels[162],
    [wfiss] = &travels[171],
    [wmist]=&travels[180],
    [like1] = &travels[188],
    [like2] = &travels[193],
    [like3] = &travels[196],
    [like4] = &travels[200],
    [like5] = &travels[206],
    [like6] = &travels[208],
    [like7] = &travels[212],
    [like8] = &travels[216],
    [like9] = &travels[222],
    [like10] = &travels[225],
    [like11] = &travels[229],
    [like12] = &travels[233],
    [like13] = &travels[236],
    [like14] = &travels[239],
    [brink] = &travels[241],
    [elong] = &travels[247],
    [wlong] = &travels[254],
    [diff0] = &travels[257],
    [diff1] = &travels[267],
    [diff2] = &travels[277],
    [diff3] = &travels[287],
    [diff4] = &travels[297],
    [diff5] = &travels[307],
    [diff6] = &travels[317],
    [diff7] = &travels[327],
    [diff8] = &travels[337],
    [diff9] = &travels[347],
    [diff10] = &travels[357],
    [pony]=&travels[367],
    [cross]=&travels[369],
    [hmk] = &travels[373],
    [west]=&travels[386],
    [south]=&travels[391],
    [ns]=&travels[394],
    [y2] = &travels[401],
    [jumble] = &travels[409],
    [windoe] = &travels[412],
    [dirty] = &travels[415],
    [ clean] = &travels[421],
    [wet] = &travels[426],
    [dusty] = &travels[434],
    [complex] = &travels[440],
    [shell] = &travels[448],
    [arch] = &travels[454],
    [ragged] = &travels[457],
    [sac] = &travels[460],
    [ante] = &travels[463],
    [witt] = &travels[466],
    [bedquilt] = &travels[477],
    [cheese] = &travels[489],
    [soft] = &travels[496],
    [e2pit] = &travels[498],
    [w2pit] = &travels[503],
    [epit] = &travels[510],
    [wpit] = &travels[512],
    [narrow] = &travels[516],
    [giant] = &travels[522],
    [block] = &travels[525],
    [immense] = &travels[528],
    [falls] = &travels[535],
    [steep] = &travels[539],
    [abovep] = &travels[544],
    [sjunc] = &travels[548],
    [tite] = &travels[551],
    [low] = &travels[557],
    [crawl] = &travels[562],
    [ window] = &travels[565],
    [oriental] = &travels[567],
    [misty] = &travels[573],
    [alcove] = &travels[576],
    [proom] = &travels[581],
    [droom] = &travels[589],
    [slab] = &travels[592],
    [abover]=&travels[596],
    [mirror] = &travels[602],
    [res] = &travels[605],
    [scan1] = &travels[607],
    [scan2] = &travels[611],
    [scan3] = &travels[613],
    [secret] = &travels[617],
    [wide] = &travels[621],
    [tight] = &travels[623],
    [tall] = &travels[624],
    [boulders] = &travels[628],
    [scorr] = &travels[629],
    [swside] = &travels[631],
    [dead0] = &travels[640],
    [dead1] = &travels[642],
    [dead2] = &travels[644],
    [dead3] = &travels[645],
    [dead4] = &travels[647],
    [dead5] = &travels[649],
    [dead6] = &travels[651],
    [dead7] = &travels[653],
    [dead8] = &travels[655],
    [dead9] = &travels[657],
    [dead10] = &travels[659],
    [dead11] = &travels[661],
    [neside] = &travels[663],
    [corr] = &travels[673],
    [fork] = &travels[678],
    [warm] = &travels[686],
    [view] = &travels[692],
    [chamber] = &travels[698],
    [lime] = &travels[703],
    [fbarr] = &travels[710],
    [barr] = &travels[718],
    [neend] = &travels[722],
    [swend] = &travels[723],
    [crack] = &travels[725],
    [neck] = &travels[726],
    [lose] = &travels[727],
    [cant] = &travels[728],
    [climb] = &travels[729],
    [check] = &travels[730],
    [snaked] = &travels[732],
    [thru] = &travels[733],
    [duck] = &travels[734],
    [sewer] = &travels[735],
    [upnout] = &travels[736],
    [didit] = &travels[737],
    [ppass] = &travels[travel_size],  // sentinel - one past the end - not valid to dereference
};
